@startuml
title Users | ChangePasswordCommand
'=====================DEFINE========================

'=====================IMPORT========================
!include ../../GlobalSettings.puml
!include ../../common/Mediatr.puml
!include ../../common/EndpointClasses.puml
!include ../../common/service/IIdentityService.puml
!include ../../common/service/IUser.puml

'=====================CLASSES========================

class ChangePasswordCommand {
    + CurrentPassword : string <<get>> <<set>>
    + NewPassword : string <<get>> <<set>>
}

class ChangePasswordCommandValidator {
    + ChangePasswordCommandValidator()
}

class ChangePasswordCommandHandler {
    - <<readonly>> _identityService : IIdentityService
    - <<readonly>> _currentUser : IUser
    + ChangePasswordCommandHandler(identityService:IIdentityService, currentUser:IUser)
    + <<async>> Handle(request:ChangePasswordCommand, cancellationToken:CancellationToken) : Task
}

'=====================ENDPOINT========================
class UserEndpoints  {
    + <<async>> ChangePassword(request:ChangePasswordCommand, sender:ISender) : Task<Ok<ApiResponse<Guid>>>
}

'=====================RELATIONSHIP========================
ChangePasswordCommand ..|> IRequest : <<implements>>
ChangePasswordCommandHandler ..> ChangePasswordCommand : <<uses>>
ChangePasswordCommandHandler ..|> IRequestHandler : <<implements>>
UserEndpoints ..> ChangePasswordCommand : <<uses>>
ChangePasswordCommandHandler ..> IIdentityService : <<inject>>
ChangePasswordCommandHandler ..> IUser : <<inject>>
ChangePasswordCommandValidator ..> ChangePasswordCommand : <<validates>>
!include zCommon.puml

@enduml