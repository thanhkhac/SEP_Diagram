@startuml
title Test | UpdateTestCommand
'=====================DEFINE========================
!define TEST_SERVICE_CANVIEWOREDITTEST
!define TEST_SERVICE_QUESTIONACCESSANDCOMPAREFORTEST
!define TEST_SERVICE_CHECKQUESTIONSFORUPDATE
'=====================IMPORT========================
!include ../../GlobalSettings.puml
!include ../../common/Mediatr.puml
!include ../../common/EndpointClasses.puml
!include ../../common/IApplicationDbContext.puml
!include ../Service/ITestService.puml
!include ../../QuestionSets/Dtos/CreateUpdateQuestionDto.puml
!include ../Dto/CheckUpdateQuestion.puml
'=====================COMMAND========================
class UpdateTestCommand {
    + TestId : Guid <<get>> <<set>>
    + Name : string <<get>> <<set>>
    + TimeLimit : int <<get>> <<set>>
    + StartTime : DateTime <<get>> <<set>>
    + EndTime : DateTime <<get>> <<set>>
    + GradeAttemptMethod : string <<get>> <<set>>
    + GradeQuestionMethod : string <<get>> <<set>>
    + IsShowCorrectAnswerInReview : bool <<get>> <<set>>
    + IsAllowReviewAfterSubmit : bool <<get>> <<set>>
    + MaxAttempt : int <<get>> <<set>>
    + NumberOfShuffles : int <<get>> <<set>>
    + PassingScore : int <<get>> <<set>>
    + CreateUpdateQuestions : List<CreateUpdateQuestionDto> <<get>> <<set>>
    + DeleteQuestionIds : List<Guid> <<get>> <<set>>
}

class UpdateTestCommandHandler {
    - <<readonly>> _context : IApplicationDbContext
    - <<readonly>> _testService : ITestService
    + UpdateTestCommandHandler(context:IApplicationDbContext, testService:ITestService)
    + <<async>> Handle(request:UpdateTestCommand, cancellationToken:CancellationToken) : Task<Guid>
}

'=====================ENDPOINT========================
class TestEndpoints  {
    + <<async>> EditTest(testId:Guid, rq:UpdateTestCommand, sender:ISender) : Task<Ok<ApiResponse<Guid>>>
}
'=====================RELATIONSHIP========================
!include zCommon.puml
UpdateTestCommand ..|> IRequest : <<implements>>
UpdateTestCommandHandler ..> UpdateTestCommand :  <<uses>>
TestEndpoints ..> UpdateTestCommand : <<uses>>
UpdateTestCommandHandler ..|> IRequestHandler : <<implements>>
UpdateTestCommandHandler ..> CreateUpdateQuestionDto : <<uses>>
UpdateTestCommandHandler ..> CheckUpdateQuestion : <<uses>>

'=====INJECT
UpdateTestCommandHandler ..> IApplicationDbContext : <<inject>>
UpdateTestCommandHandler ..> ITestService : <<inject>>
'=====INJECT
@enduml