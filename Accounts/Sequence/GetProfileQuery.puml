@startuml
actor User
participant "User Profile UI" as UI
participant AccountEndpoints
participant GetProfileQueryHandler as Handler
participant ApplicationDbContext
participant Database

User -> UI : Request profile data
activate UI

UI -> AccountEndpoints : GET /api/Account/Profile
activate AccountEndpoints

AccountEndpoints -> Handler : Handle(GetProfileQuery)
activate Handler

Handler -> ApplicationDbContext : Query User Profile by UserId
activate ApplicationDbContext

ApplicationDbContext -> Database : Query User
activate Database
Database --> ApplicationDbContext : User
deactivate Database

ApplicationDbContext --> Handler : User
deactivate ApplicationDbContext

alt User Profile Not Found
    Handler --> AccountEndpoints : Error: USER_PROFILE_NOT_FOUND
    deactivate Handler
    AccountEndpoints --> UI : 404 Not Found (errorCode: USER_PROFILE_NOT_FOUND)
    deactivate AccountEndpoints
    UI -> User : Error: User profile not found
else User Profile Found
    Handler --> AccountEndpoints : UserProfileDto
    deactivate Handler
    AccountEndpoints --> UI : 200 OK (ApiResponse<UserProfileDto>)
    deactivate AccountEndpoints
    UI -> User : Show user profile
end
deactivate UI

@enduml
